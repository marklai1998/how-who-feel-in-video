{"version":3,"sources":["../../../public/javascripts/upload.js"],"names":["$","document","ready","on","width","files","get","length","formData","FormData","i","file","append","name","ajax","url","type","data","processData","contentType","success","xhr","XMLHttpRequest","upload","addEventListener","evt","lengthComputable","percentComplete","loaded","total","parseInt","href","attr","removeClass","find","setTimeout","window","location","replace","statusCode"],"mappings":";;AAAAA,EAAEC,QAAF,EAAYC,KAAZ,CAAkB,YAAY;AAC1BF,MAAE,YAAF,EAAgBG,EAAhB,CAAmB,OAAnB,EAA4B,YAAY;AACpCH,UAAE,eAAF,EAAmBI,KAAnB,CAAyB,IAAzB;AACH,KAFD;AAGAJ,MAAE,SAAF,EAAaG,EAAb,CAAgB,OAAhB,EAAyB,YAAY;AACjC,YAAIE,QAAQL,EAAE,YAAF,EAAgBM,GAAhB,CAAoB,CAApB,EAAuBD,KAAnC;AACA,YAAIA,MAAME,MAAN,GAAe,CAAnB,EAAsB;AAClB;AACA;AACA,gBAAIC,WAAW,IAAIC,QAAJ,EAAf;AACA,iBAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIL,MAAME,MAA1B,EAAkCG,GAAlC,EAAuC;AACnC,oBAAIC,OAAON,MAAMK,CAAN,CAAX;AACA;AACAF,yBAASI,MAAT,CAAgB,OAAhB,EAAyBD,IAAzB,EAA8BA,KAAKE,IAAnC;AACH;AACDb,cAAEc,IAAF,CAAO;AACHC,qBAAK,gBADF;AAEHC,sBAAM,MAFH;AAGHC,sBAAMT,QAHH;AAIHU,6BAAa,KAJV;AAKHC,6BAAa,KALV;AAMHC,yBAAS,iBAAUH,IAAV,EAAgB,CAExB,CARE;AASHI,qBAAK,eAAY;AACb;AACA,wBAAIA,MAAM,IAAIC,cAAJ,EAAV;AACA;AACAD,wBAAIE,MAAJ,CAAWC,gBAAX,CAA4B,UAA5B,EAAwC,UAAUC,GAAV,EAAe;AACnD,4BAAIA,IAAIC,gBAAR,EAA0B;AACtB;AACA,gCAAIC,kBAAkBF,IAAIG,MAAJ,GAAaH,IAAII,KAAvC;AACAF,8CAAkBG,SAASH,kBAAkB,GAA3B,CAAlB;;AAEA;AACA;AACA3B,8BAAE,eAAF,EAAmBI,KAAnB,CAAyBuB,kBAAkB,GAA3C;;AAEA;AACA,gCAAIA,oBAAoB,GAAxB,EAA6B;AACzB,oCAAII,OAAO/B,EAAE,IAAF,EAAQgC,IAAR,CAAa,MAAb,CAAX;AACAhC,kCAAE,UAAF,EAAciC,WAAd,CAA0B,WAA1B;AACAjC,kCAAE,QAAF,EAAYkC,IAAZ,CAAiB,IAAjB,EAAuBD,WAAvB,CAAmC,iBAAnC;AACAE,2CACI,YAAY;AACRC,2CAAOC,QAAP,CAAgBC,OAAhB,CAAwB,yBAAxB;AACH,iCAHL,EAGO,IAHP;AAIH;AACJ;AACJ,qBArBD,EAqBG,KArBH;AAsBA,2BAAOjB,GAAP;AACH,iBApCE;AAqCHkB,4BAAY;AACR,yBAAK,aAAY;AACbH,+BAAOC,QAAP,CAAgBC,OAAhB,CAAwB,uBAAxB;AACH;AAHO;AArCT,aAAP;AA2CH;AACJ,KAvDD;AAwDH,CA5DD","file":"upload.js","sourcesContent":["$(document).ready(function () {\r\n    $('.inputfile').on('click', function () {\r\n        $('.progress-bar').width('0%');\r\n    });\r\n    $('.submit').on('click', function () {\r\n        let files = $('.inputfile').get(0).files;\r\n        if (files.length > 0) {\r\n            // create a FormData object which will be sent as the data payload in the\r\n            // AJAX request\r\n            let formData = new FormData();\r\n            for (let i = 0; i < files.length; i++) {\r\n                let file = files[i];\r\n                // add the files to formData object for the data payload\r\n                formData.append('video', file,file.name);\r\n            }\r\n            $.ajax({\r\n                url: '/videos/upload',\r\n                type: 'POST',\r\n                data: formData,\r\n                processData: false,\r\n                contentType: false,\r\n                success: function (data) {\r\n\r\n                },\r\n                xhr: function () {\r\n                    // create an XMLHttpRequest\r\n                    let xhr = new XMLHttpRequest();\r\n                    // listen to the 'progress' event\r\n                    xhr.upload.addEventListener('progress', function (evt) {\r\n                        if (evt.lengthComputable) {\r\n                            // calculate the percentage of upload completed\r\n                            let percentComplete = evt.loaded / evt.total;\r\n                            percentComplete = parseInt(percentComplete * 100);\r\n\r\n                            // update the Bootstrap progress bar with the new percentage\r\n                            // $('.progress-bar').text(percentComplete + '%');\r\n                            $('.progress-bar').width(percentComplete + '%');\r\n\r\n                            // once the upload reaches 100%, set the progress bar text to done\r\n                            if (percentComplete === 100) {\r\n                                let href = $(this).attr(\"href\");\r\n                                $(\".content\").removeClass(\"show-menu\");\r\n                                $(\".title\").find(\"h3\").removeClass(\"show-menu-title\");\r\n                                setTimeout(\r\n                                    function () {\r\n                                        window.location.replace(\"/videos/message/success\");\r\n                                    }, 1000);\r\n                            }\r\n                        }\r\n                    }, false);\r\n                    return xhr;\r\n                },\r\n                statusCode: {\r\n                    500: function () {\r\n                        window.location.replace(\"/videos/message/error\");\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    });\r\n});"]}
{"version":3,"sources":["../../../public/javascripts/video_playback.js"],"names":["video","$","playButton","muteButton","seekBar","volumeBar","overlay","video_width","video_height","element_width","element_height","ratio","time","document","ready","load","on","get","videoWidth","videoHeight","width","height","css","fadeIn","text","format","duration","window","resize","click","fn","video_toggle","hasClass","removeClass","addClass","prop","change","val","mousedown","pause","clearInterval","currentTime","play","setInterval","value","s","m","Math","floor"],"mappings":"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","file":"video_playback.js","sourcesContent":["let video = $(\"#video\");\r\nlet playButton = $(\"#play-pause\");\r\nlet muteButton = $(\"#mute\");\r\nlet seekBar = $(\"#seek-bar\");\r\nlet volumeBar = $(\"#volume-bar\");\r\nlet overlay = $('#overlay-outer');\r\nlet video_width;\r\nlet video_height;\r\nlet element_width;\r\nlet element_height;\r\nlet ratio;\r\nlet time;\r\n$(document).ready(function () {\r\n    video.load();\r\n    video.on(\"loadeddata\", function () {\r\n        video_width = video.get(0).videoWidth;\r\n        video_height = video.get(0).videoHeight;\r\n        element_width = video.width();\r\n        element_height = video.height();\r\n        ratio = element_height / video_height;\r\n        overlay.css({\"width\": video_width * ratio + \"px\"});\r\n        overlay.css({\"height\": element_height + \"px\"});\r\n        overlay.fadeIn();\r\n        $(\"#duration\").text(\" / \"+ format(video.get(0).duration));\r\n    });\r\n});\r\n\r\n$(window).resize(function () {\r\n    video_width = video.get(0).videoWidth;\r\n    video_height = video.get(0).videoHeight;\r\n    element_width = video.width();\r\n    element_height = video.height();\r\n    ratio = element_height / video_height;\r\n    overlay.css({\"width\": video_width * ratio + \"px\"});\r\n    overlay.css({\"height\": element_height + \"px\"});\r\n});\r\n\r\nplayButton.click(function () {\r\n    $.fn.video_toggle();\r\n});\r\nvideo.click(function () {\r\n    $.fn.video_toggle();\r\n});\r\nmuteButton.click(function () {\r\n    if ($(this).hasClass(\"fa-volume-off\")) {\r\n        $(this).removeClass(\"fa-volume-off\");\r\n        $(this).addClass(\"fa-volume-up\");\r\n        video.prop('muted', false);\r\n    } else {\r\n        muteButton.removeClass(\"fa-volume-up\");\r\n        muteButton.addClass(\"fa-volume-off\");\r\n        video.prop('muted', true);\r\n    }\r\n});\r\nvolumeBar.change(function () {\r\n    video.prop(\"volume\", $(this).val());\r\n});\r\nseekBar.mousedown(function () {\r\n    playButton.removeClass(\"fa-pause\");\r\n    playButton.addClass(\"fa-play\");\r\n    video.get(0).pause();\r\n    clearInterval(time);\r\n});\r\nseekBar.change(function () {\r\n    video[0].currentTime = video[0].duration * (seekBar.val() / 10000);\r\n    $(\"#current\").text(format(video.get(0).currentTime));\r\n});\r\n$.fn.video_toggle = function () {\r\n    if (playButton.hasClass(\"fa-pause\")) {\r\n        playButton.removeClass(\"fa-pause\");\r\n        playButton.addClass(\"fa-play\");\r\n        video.get(0).pause();\r\n        clearInterval(time);\r\n    } else {\r\n        playButton.removeClass(\"fa-play\");\r\n        playButton.addClass(\"fa-pause\");\r\n        video.get(0).play();\r\n        time = setInterval(function(){\r\n            let value = (10000 / video.get(0).duration) * video.get(0).currentTime;\r\n            seekBar.val(value);\r\n            $(\"#current\").text(format(video.get(0).currentTime));\r\n        }, 1);\r\n    }\r\n};\r\nfunction format(s) {\r\n    m = Math.floor(s / 60);\r\n    m = (m >= 10) ? m : \"0\" + m;\r\n    s = Math.floor(s % 60);\r\n    s = (s >= 10) ? s : \"0\" + s;\r\n    return m + \":\" + s;\r\n}"]}
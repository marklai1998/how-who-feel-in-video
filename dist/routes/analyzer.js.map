{"version":3,"sources":["../../routes/analyzer.js"],"names":["express","require","router","Router","db","mongoose","videos","model","get","req","res","next","session","username","redirect","analyze_video","id","findOne","_id","err","video","render","title","file_name","ext","file_type","console","log","params","module","exports"],"mappings":";;;;AAAA,IAAMA,UAAUC,QAAQ,SAAR,CAAhB;AACA,IAAMC,SAASF,QAAQG,MAAR,EAAf;;AAEA,IAAMC,KAAKH,QAAQ,cAAR,CAAX;AACA,IAAMI,WAAWJ,QAAQ,UAAR,CAAjB;AACA,IAAMK,SAASD,SAASE,KAAT,CAAe,QAAf,CAAf;;AAEAL,OAAOM,GAAP,CAAW,GAAX,EAAgB,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AACtC,QAAIF,IAAIG,OAAJ,CAAYC,QAAhB,EAA0B;AACtBH,YAAII,QAAJ,CAAa,SAAb;AACH,KAFD,MAEOJ,IAAII,QAAJ,CAAa,QAAb;AACV,CAJD;;AAMAZ,OAAOM,GAAP,CAAW,MAAX,EAAmB,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAAA;;AACzC,QAAIF,IAAIG,OAAJ,CAAYC,QAAhB,EAA0B;AACtB,YAAME;AAAA,+EAAgB,iBAAOC,EAAP;AAAA;AAAA;AAAA;AAAA;AAAA;;AAEdV,uCAAOW,OAAP,CAAe,EAACC,KAAKF,EAAN,EAAf,EAA0B,UAAUG,GAAV,EAAeC,KAAf,EAAsB;AAC5C,wCAAIA,KAAJ,EAAW;AACPV,4CAAIW,MAAJ,CAAW,UAAX,EAAuB;AACnBC,mDAAO,UADY;AAEnBT,sDAAUJ,IAAIG,OAAJ,CAAYC,QAFH;AAGnBG,gDAAII,MAAMF,GAHS;AAInBK,uDAAWH,MAAMG,SAJE;AAKnBC,iDAAKJ,MAAMK;AALQ,yCAAvB;AAOH,qCARD,MAQO;AACHf,4CAAII,QAAJ,CAAa,SAAb;AACH;AACJ,iCAZD;AAFc;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAhB;;AAAA;AAAA;AAAA;AAAA,WAAN;AAoBAY,gBAAQC,GAAR,CAAYZ,cAAcN,IAAImB,MAAJ,CAAWZ,EAAzB,CAAZ;AACH,KAtBD,MAsBON,IAAII,QAAJ,CAAa,QAAb;AACV,CAxBD;;AA0BAe,OAAOC,OAAP,GAAiB5B,MAAjB","file":"analyzer.js","sourcesContent":["const express = require('express');\nconst router = express.Router();\n\nconst db = require('../db/videos');\nconst mongoose = require('mongoose');\nconst videos = mongoose.model('videos');\n\nrouter.get('/', function (req, res, next) {\n    if (req.session.username) {\n        res.redirect('/videos')\n    } else res.redirect('/login')\n});\n\nrouter.get('/:id', function (req, res, next) {\n    if (req.session.username) {\n        const analyze_video = async (id) => {\n            try {\n                videos.findOne({_id: id}, function (err, video) {\n                    if (video) {\n                        res.render('analyzer', {\n                            title: 'Analyzer',\n                            username: req.session.username,\n                            id: video._id,\n                            file_name: video.file_name,\n                            ext: video.file_type\n                        });\n                    } else {\n                        res.redirect('/videos');\n                    }\n                });\n            }\n            catch (err) {\n                return err\n            }\n        };\n        console.log(analyze_video(req.params.id));\n    } else res.redirect('/login')\n});\n\nmodule.exports = router;\n"]}